% Author: Dr. Matthias Jung, DL9MJ
% Year: 2020
\documentclass[convert = false, border=5pt]{standalone}
\input{../common/settings.tex}
\usepackage{amsmath}
\usepackage{unicode-math}
\setmathfont{Fira Math}
\setmathfont[range=up]{Roboto}
\setmathfont[range=it]{Roboto-Italic}
\setmathfont[range=\int]{Fira Math}
\usepackage[euler]{textgreek}

\begin{document}
\ctikzset{%
    quadpoles/transformer core/height=2.15
}%

\begin{circuitikz}
    %\tikzstyle{help lines}=[blue!50];
    %\draw[style=help lines] (-6,-4) grid (16,4);
    %
    \draw (0.0, 0.0) node [circ](C1){};
    \draw (1.5, 1.5) node [circ](C2){};
    \draw (1.5,-1.5) node [circ](C3){};
    \draw (3.0, 0.0) node [circ](C4){};
    %
    \draw ( 0.3,-0.08) node []{\Large--};
    \draw ( 1.5, 1.15) node []{\Large\textasciitilde};
    \draw ( 1.5,-1.15) node []{\Large\textasciitilde};
    \draw ( 2.7,-0.02) node []{\Large+};
    %
    \draw (0.0, 0.0) to [stroke diode] (1.5, 1.5);
    \draw (1.5, 1.5) to [stroke diode] (3.0, 0.0);
    \draw (1.5,-1.5) to [stroke diode] (3.0, 0.0);
    \draw (0,0, 0.0) to [stroke diode] (1.5,-1.5);
    %
    \draw(-2.5,0) node[transformer core](T){};
    %
    \draw(T.B1) -| (C2);
    \draw(T.B2) -| (C3);
    \draw(T.A1) to [short, -o] ++(-1,0);
    \draw(T.A2) to [short, -o] ++(-1,0);
    %
    \draw(-3.9,0) node[]{$\textrm{U}_{\textrm{PRIM}}$};
    \draw(-1.2,0) node[]{$\textrm{U}_{\textrm{SEK}}$};
    %
    \draw(C1) |- (10.5,-3) to [short, -o] ++(0,0);
    \draw(C4) -- ++(1.5, 0)
              node[circ](C5){}
              to [L, l=L] ++(3,0)
              node[circ](C6){}
              to [short] ++(1.5,0)
              node[circ](C7){}
              to [short, -o] ++(1.5,0);
     %
     \draw(C5) to [C, l={$\textrm{C}_{\textrm{L}}$}] ++ (0,-3) node[circ]{};
     \draw(C6) to [C, l={$\textrm{C}_{\textrm{S}}$}] ++ (0,-3) node[circ]{};
     \draw(C7) to [R, l={R}] ++ (0,-3) node[circ]{} ;
     %
    \draw (10.85,-3.08) node []{\Large--};
    \draw (10.85,-0.02) node []{\Large+};
\end{circuitikz}
\end{document}
