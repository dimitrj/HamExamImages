% Author: Dr. Matthias Jung, DL9MJ
% Year: 2020
\documentclass[convert = false, border=5pt]{standalone}
\input{../common/settings.tex}
\usepackage{amsmath}
\usepackage{unicode-math}
\setmathfont{Fira Math}
\setmathfont[range=up]{Roboto}
\setmathfont[range=it]{Roboto-Italic}
\setmathfont[range=\int]{Fira Math}
\usepackage[euler]{textgreek}

\begin{document}

\begin{circuitikz}[american]
    %\tikzstyle{help lines}=[blue!50];
    %\draw[style=help lines] (-6,-4) grid (16,4);
    \ctikzset{bipoles/nos/height=0.5, bipoles/nos/width=0.75}
    %
    \draw (0.0, 0.0) node [circ](C1){};
    \draw (1.5, 1.5) node [circ](C2){};
    \draw (1.5,-1.5) node [circ](C3){};
    \draw (3.0, 0.0) node [circ](C4){};
    %
    \draw (0.0, 0.0) to [stroke diode] (1.5, 1.5);
    \draw (1.5, 1.5) to [stroke diode] (3.0, 0.0);
    \draw (1.5,-1.5) to [stroke diode] (3.0, 0.0);
    \draw (0,0, 0.0) to [stroke diode] (1.5,-1.5);
    %
    \draw (6.5,-0.25) node[transformer, yscale=1.6666666](T){};
    %
    \draw(-1.5,0) node[]{\Large\textasciitilde 230\,V};

    \draw(C4) |- ++(0.5,1.5) to [normal open switch] (T.A1);
    %\draw(T.B2) -| (C3);
    \draw(C2) to [short, -o] ++(-3,0);
    \draw(C3) to [short, -o] ++(-3,0);
    %
    \draw(C1) |- (T.A2);
    \draw (T.B1) to [stroke diode] ++(3,0) node [circ](C5){} to [short, -o] ++(1,0);
    \draw (T.B2) to [short]        ++(3,0) node [circ](C6){} to [short, -o] ++(1,0);
    %
    \draw(C4) -- ++(1,0) to [C, -*] ++ (0,-2);
    \draw(C5) to [C] (C6);
    %
    \draw (  3.7,-0.6) node []{\Large+};
    \draw (10.25, 0.2) node []{\Large+};
    \draw (  4.5, 0.8) node []{\Large E};
    %
    \draw (6.5,0.4) -- (6.5,-0.9);
    %
    \draw(3.5,2.2) rectangle (5.5,1.2);
\end{circuitikz}
\end{document}
